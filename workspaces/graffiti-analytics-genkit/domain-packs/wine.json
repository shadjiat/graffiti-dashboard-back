{
  "$schema": "https://example.com/graffiti/domain-pack.schema.json",
  "id": "wine",
  "version": "1.0.0",
  "title": "Pack domaine — Vin",
  "description": "Taxonomie, synonymes et règles d'extraction pour les conversations et requêtes liées au vin.",

  "synonyms": {
    "wine": ["vin", "bouteille", "cuvée", "référence"],
    "sparkling": ["pétillant", "effervescent", "bulles", "crémant"],
    "champagne": ["champagne", "brut", "extra brut", "demi-sec"],
    "red": ["rouge", "vin rouge"],
    "white": ["blanc", "vin blanc"],
    "rosé": ["rosé", "vin rosé"],
    "sweet": ["doux", "moelleux", "sucré"],
    "dry": ["sec", "très sec"],
    "tannic": ["tannique", "charpenté", "corsé"],
    "light": ["léger", "fruité", "gouleyant"],
    "aromatic": ["aromatique", "floral", "expressif"],
    "price": ["prix", "budget", "€", "euros", "moins de", "maximum"],
    "food_pairing": ["accord", "accords mets vins", "avec", "pour", "accompagner"],
    "occasion": ["cadeau", "apéritif", "repas", "soirée", "dîner", "anniversaire", "fête"],
    "grape": ["cépage", "cépages"],
    "region": ["région", "appellation", "AOC", "IGP", "terroir"],
    "organic": ["bio", "AB", "biodynamie", "biodynamique", "Demeter"],
    "low_alcohol": ["faible alcool", "léger en alcool", "≤", "moins de %"],
    "spark_esl": ["clignoter", "faire clignoter", "repérer", "localiser", "biper"]
  },

  "facets": {
    "color": {
      "type": "enum",
      "values": ["red", "white", "rosé", "sparkling"]
    },
    "style": {
      "type": "enum",
      "values": ["dry", "sweet", "tannic", "light", "aromatic"]
    },
    "region": { "type": "string" },
    "grape": { "type": "string" },
    "price_max_eur": { "type": "number" },
    "organic": { "type": "boolean" },
    "occasion": { "type": "string" },
    "food_pairing": { "type": "string" }
  },

  "regexExtractors": [
    {
      "name": "price_max_eur",
      "pattern": "(?:moins de|<=?|maximum|max|jusqu'?a)\\s*(\\d{1,3})(?:\\s*€|\\s*euros)?",
      "group": 1,
      "as": "number"
    },
    {
      "name": "low_alcohol",
      "pattern": "(?:moins de|<=?)\\s*(\\d{1,2})\\s*\\%\\s*d'?alcool",
      "group": 1,
      "as": "number"
    }
  ],

  "intents": {
    "qa_general": {
      "utterances": [
        "Je cherche un vin {color?} {style?} pour {occasion?}",
        "Un {color} pas trop cher pour {food_pairing?}",
        "Une bouteille {organic?} autour de {price_max_eur?}€",
        "Quel vin {region?} {grape?} irait avec {food_pairing?} ?"
      ],
      "outputs": ["facets"]
    },
    "open_product_card": {
      "utterances": [
        "Montre la fiche de {wine_name}",
        "Ouvre la fiche produit",
        "Détails de cette bouteille"
      ]
    },
    "spark_esl": {
      "utterances": [
        "{spark_esl} l'étiquette de {wine_name}",
        "{spark_esl} cette référence",
        "Je ne trouve pas {wine_name}"
      ]
    },
    "visual_search": {
      "utterances": [
        "Passe en visual search",
        "Voir en réalité augmentée",
        "Filtrer en AR les {color} {style?} moins de {price_max_eur?}€"
      ],
      "outputs": ["facets"]
    }
  },

  "telemetry": {
    "eventNames": {
      "chat_message": "AI Chat Message",
      "product_card_open": "Product Card Opened",
      "esl_blink": "ESL Blink Triggered",
      "visual_search_enter": "Visual Search Entered"
    },
    "propertyMap": {
      "domain": "domain",
      "intent": "intent",
      "facets": "facets",
      "product_id": "productId",
      "store_id": "storeId",
      "session_id": "sessionId"
    }
  }
}